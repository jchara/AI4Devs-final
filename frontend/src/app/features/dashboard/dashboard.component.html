<div class="dashboard">
  <div class="dashboard-header">
    <h1 class="dashboard-title">Dashboard</h1>
    <p class="dashboard-subtitle">Resumen de desarrollos y microservicios</p>
  </div>

  <!-- Métricas principales -->
  <div class="metrics-grid">
    <app-metric-card
      title="Total Desarrollos"
      [value]="metricas?.total || 0"
      iconColor="var(--color-accent)"
      cardClass="accent">
      <svg slot="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="7" height="7"/>
        <rect x="14" y="3" width="7" height="7"/>
        <rect x="14" y="14" width="7" height="7"/>
        <rect x="3" y="14" width="7" height="7"/>
      </svg>
    </app-metric-card>

    <app-metric-card
      title="En QA"
      [value]="metricas?.enQA || 0"
      iconColor="var(--color-primary)"
      cardClass="primary">
      <svg slot="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 12l2 2 4-4"/>
        <circle cx="12" cy="12" r="10"/>
      </svg>
    </app-metric-card>

    <app-metric-card
      title="En Producción"
      [value]="metricas?.enProduccion || 0"
      iconColor="#4CAF50"
      cardClass="success">
      <svg slot="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
        <path d="m2 17 10 5 10-5"/>
        <path d="m2 12 10 5 10-5"/>
      </svg>
    </app-metric-card>

    <app-metric-card
      title="Pendientes"
      [value]="metricas?.pendientes || 0"
      iconColor="#FF9800"
      cardClass="warning">
      <svg slot="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <path d="m9 9 6 6"/>
        <path d="m15 9-6 6"/>
      </svg>
    </app-metric-card>
  </div>

  <!-- Contenido principal -->
  <div class="dashboard-content">
    <!-- Tabla de desarrollos activos -->
    <div class="content-section">
      <div class="section-header">
        <h2 class="section-title">Desarrollos Activos</h2>
        <button class="btn btn-outline">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 6h18"/>
            <path d="M7 12h10"/>
            <path d="M10 18h4"/>
          </svg>
          Filtrar
        </button>
      </div>

      <div class="table-container">
        <table class="developments-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Estado</th>
              <th>Ambiente</th>
              <th>Fecha</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let desarrollo of desarrollos" class="fade-in">
              <td>
                <div class="development-info">
                  <span class="development-name">{{ desarrollo.nombre }}</span>
                  <span class="development-version" *ngIf="desarrollo.version">{{ desarrollo.version }}</span>
                </div>
              </td>
              <td>
                <span class="estado-desarrollo" [ngClass]="getEstadoClass(desarrollo.estado)">
                  {{ desarrollo.estado }}
                </span>
              </td>
              <td>
                <span class="ambiente-badge" [ngClass]="getAmbienteClass(desarrollo.ambiente)">
                  {{ desarrollo.ambiente }}
                </span>
              </td>
              <td>{{ desarrollo.fecha | date:'dd/MM/yyyy' }}</td>
              <td>
                <div class="actions">
                  <button class="btn-icon" title="Ver detalles">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Panel lateral -->
    <div class="sidebar-content">
      <!-- Gráfico de desarrollos por ambiente -->
      <div class="content-section">
        <h3 class="section-title">Desarrollos por Ambiente</h3>
        <app-development-chart [data]="datosGrafico"></app-development-chart>
      </div>

      <!-- Actividad reciente -->
      <div class="content-section">
        <h3 class="section-title">Actividad Reciente</h3>
        <div class="activity-list">
          <div class="activity-item" *ngFor="let actividad of actividadReciente">
            <div class="activity-icon" [ngClass]="getTipoActividadClass(actividad.tipo)">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </div>
            <div class="activity-content">
              <p class="activity-description">{{ actividad.descripcion }}</p>
              <span class="activity-time">{{ actividad.fecha | date:'dd/MM HH:mm' }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Próximos despliegues -->
      <div class="content-section">
        <h3 class="section-title">Próximos Despliegues</h3>
        <div class="deployment-list">
          <div class="deployment-item" *ngFor="let despliegue of proximosDespliegues">
            <div class="deployment-info">
              <span class="deployment-name">{{ despliegue.nombre }}</span>
              <span class="deployment-date">{{ despliegue.fechaProgramada | date:'dd/MM/yyyy' }}</span>
            </div>
            <span class="ambiente-badge" [ngClass]="getAmbienteClass(despliegue.ambiente)">
              {{ despliegue.ambiente }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
